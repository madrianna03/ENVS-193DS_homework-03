---
title: "ENVS193DS_homework3"
author: Adrianna Martinez
format: html
github respository link: https://github.com/madrianna03/ENVS-193DS_homework-03.git
---
```{r}
#read in all packages
library(tidyverse)
library(here)
library(gt)
library(janitor)
library(readxl)

#read in personal data
data <- read_csv(here("data", "ENVS193DS_personaldata_cleaned.csv"))

```

Problem 1: Personal Data
a. Data summarizing
I will summarize my data by calculating the mean productivity score across categories of my grouping variables: hours of sleep the night before a study session, studying with others or not, caffeine, and location of study session. Comparing these groups will inform how each factor affects productivity levels; I expect increased caffeine and studying with others to improve my energy and attention while study locations such as my bedroom or outside to be less productive as there are more distractions. 
b. 
```{r}
#visualization: productivity across all variables
# Categorize caffeine and sleep with binning
data <- data %>%
  mutate(
    caffeine_level = case_when(
      caffeine_mg == 0 ~ "None",
      caffeine_mg > 0 & caffeine_mg <= 100 ~ "Low",
      caffeine_mg > 100 & caffeine_mg <= 200 ~ "Moderate",
      caffeine_mg > 200 ~ "High"
    ),
    sleep_level = case_when(
      sleep_hrs < 6 ~ "Low",
      sleep_hrs >= 6 & sleep_hrs < 8 ~ "Medium",
      sleep_hrs >= 8 ~ "High"
    )
  )

# Pivot for grouped plots
summary_data <- data %>%
  select(productivity, with_others, sleep_level, caffeine_level, location) %>%
  pivot_longer(cols = c(with_others, sleep_level, caffeine_level, location),
               names_to = "variable", values_to = "group") %>%
  group_by(variable, group) %>%
  summarise(mean_productivity = mean(productivity, na.rm = TRUE), .groups = "drop")

# Bar Plot of mean productivity by with others, sleep, caffeine, and location
ggplot(summary_data, aes(x = group, y = mean_productivity, fill = variable)) +
  geom_col(show.legend = FALSE) +
  facet_wrap(~ variable, scales = "free_x") +
  labs(x = "Group", y = "Mean Productivity (1–10)", title = "Average Productivity by Group") +
  scale_fill_brewer(palette = "Set2") +
  theme_minimal()
```
c. Caption

Figure 1. Mean productivity scores (1–10) by social context, sleep level, caffeine intake, and study location. Each panel displays how productivity varies with respect to one grouping factor, helping visualize which environments or habits are linked with higher productivity.

d. Table Presentation
```{r}
library(gt)
#create productivity summary table using gt
summary_data %>%
  pivot_wider(names_from = variable, values_from = mean_productivity) %>% 
  gt() %>%
  tab_header(
    title = "Average Productivity Across Grouping Variables"
  ) %>%
  fmt_number(columns = everything(), decimals = 1)
```
Problem 2: Affective Visualization

a. I would use a set of small line charts, each showing productivity over time, but faceted by whether I was alone or with others, whether I had caffeine, the study location, sleep quality (defined by greater than 6 hours of sleep). This allows me to track how each context influenced my productivity. The effective element comes from seeing how different environments or habits affect my well-being and workflow across time, in a personal and relatable way. 

b.Sketch of Affective Visualization

![Sketch of productivity visualization faceted by location, annotated with caffeine and social context.](images/IMG_2449.jpg)


